(this["webpackJsonpmy-react-app"]=this["webpackJsonpmy-react-app"]||[]).push([[0],{101:function(e,t,n){"use strict";n.d(t,"b",(function(){return o})),n.d(t,"a",(function(){return a}));var r=n(31),i=n(5),c="ADD_MESSAGE",s={dialogs:[{id:1,name:"Jonathan"},{id:2,name:"Joseph"},{id:3,name:"Dio"},{id:4,name:"Jotaro"},{id:5,name:"Josuke"},{id:6,name:"Jorno"},{id:7,name:"Kars"}],messages:[{id:1,message:"Hi"},{id:2,message:"Hello"},{id:3,message:"Hi"},{id:4,message:"Hi"},{id:5,message:"Hi"},{id:6,message:"Yo"},{id:7,message:"Yo"},{id:8,message:"Yo"},{id:9,message:"Yo"}]},o=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:s,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case c:var n={id:11,message:t.newMessageBody};return Object(i.a)(Object(i.a)({},e),{},{messages:[].concat(Object(r.a)(e.messages),[n])});default:return e}},a=function(e){return{type:c,newMessageBody:e}}},131:function(e,t,n){e.exports={paginator:"Paginator_paginator__3y8pC",pageNumber:"Paginator_pageNumber__36RAM",selectedPage:"Paginator_selectedPage__nYv7e"}},14:function(e,t,n){"use strict";n.d(t,"c",(function(){return c})),n.d(t,"b",(function(){return s})),n.d(t,"a",(function(){return o}));var r=n(127),i=r.create({baseURL:"https://social-network.samuraijs.com/api/1.0/",withCredentials:!0,headers:{"API-KEY":"2bbaa87f-971d-4450-8950-56c009301e52"}}),c={getUsers:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:1,t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:10;return i.get("users?page=".concat(e,"&count=").concat(t)).then((function(e){return e.data}))},unfollow:function(e){return i.delete("follow/".concat(e)).then((function(e){return e.data}))},follow:function(e){return i.post("follow/".concat(e),null).then((function(e){return e.data}))}},s={getUserProfile:function(e){return i.get("profile/".concat(e))},getStatus:function(e){return i.get("profile/status/".concat(e))},updateStatus:function(e){return i.put("profile/status",{status:e})}},o={auth:function(){return i.get("auth/me").then((function(e){return e.data}))},login:function(e,t){var n=arguments.length>2&&void 0!==arguments[2]&&arguments[2];return i.post("/auth/login",{email:e,password:t,rememberMe:n}).then((function(e){return e.data}))},logout:function(){return i.delete("auth/login").then((function(e){return e.data}))}}},16:function(e,t,n){e.exports={nav:"Navbar_nav__1kc9y",item:"Navbar_item__1JwW3",activeLink:"Navbar_activeLink__1H8Lh"}},240:function(e,t,n){},241:function(e,t,n){},247:function(e,t,n){},248:function(e,t,n){},287:function(e,t,n){"use strict";n.r(t);var r=n(9),i=n(5),c=n(42),s=n(14),o="SET_USER_DATA",a={userId:null,email:null,login:null,isAuth:!1},u=function(e,t,n,r){return{type:o,data:{userId:e,email:t,login:n,isAuth:r}}},l=function(){return function(e){return s.a.auth().then((function(t){if(0===t.resultCode){var n=t.data,r=n.login,i=n.id,c=n.email;e(u(i,c,r,!0))}}))}},d=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:a,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case o:return Object(i.a)(Object(i.a)({},e),t.data);default:return e}},j=n(101),b=n(92),f={},g=n(31),h="FOLLOW",p="UNFOLLOW",O="SET_USERS",m="SET_CURRENT_PAGE",v="SET_TOTAL_USERS_COUNT",x="TOGGLE_IS_FETCING",P="TOGGLE_IS_FOLLOWING_PROGRESS",C={users:[],pageSize:5,totalUsersCount:0,currentPage:1,isFetching:!0,followingIsProgreess:[]},_=function(e){return{type:h,userId:e}},w=function(e){return{type:p,userId:e}},S=function(e){return{type:m,currentPage:e}},y=function(e){return{type:x,isFetching:e}},N=function(e,t){return{type:P,isFetching:e,userId:t}},k=n(128),I=n(126),F="SET_INITIALIZED",U={initialized:!1},E=Object(r.c)({profilePage:b.d,messagesPage:j.b,sitebar:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:f;return e},usersPage:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:C,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case h:return Object(i.a)(Object(i.a)({},e),{},{users:e.users.map((function(e){return e.id===t.userId?Object(i.a)(Object(i.a)({},e),{},{followed:!0}):e}))});case p:return Object(i.a)(Object(i.a)({},e),{},{users:e.users.map((function(e){return e.id===t.userId?Object(i.a)(Object(i.a)({},e),{},{followed:!1}):e}))});case O:return Object(i.a)(Object(i.a)({},e),{},{users:Object(g.a)(t.users)});case m:return Object(i.a)(Object(i.a)({},e),{},{currentPage:t.currentPage});case v:return Object(i.a)(Object(i.a)({},e),{},{totalUsersCount:t.totalCount});case x:return Object(i.a)(Object(i.a)({},e),{},{isFetching:t.isFetching});case P:return Object(i.a)(Object(i.a)({},e),{},{followingIsProgreess:t.isFetching?[].concat(Object(g.a)(e.followingIsProgreess),[t.userId]):e.followingIsProgreess.filter((function(e){return e!==t.userId}))});default:return e}},auth:d,form:I.a,app:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:U,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case F:return Object(i.a)(Object(i.a)({},e),{},{initialized:!0});default:return e}}}),L=Object(r.e)(E,Object(r.a)(k.a)),T=n(0),z=n.n(T),A=n(61),M=n.n(A),H=(n(240),n(33)),R=n(34),D=n(36),G=n(35),J=(n(241),n(13)),B=n(86),Y=n.n(B),W=n(1),K=function(e){return Object(W.jsxs)("header",{className:Y.a.header,children:[Object(W.jsx)("img",{src:"https://cdn.logo.com/hotlink-ok/logo-social.png",alt:""}),Object(W.jsx)("div",{className:Y.a.loginBlock,children:e.isAuth?Object(W.jsxs)("div",{children:[e.login," - ",Object(W.jsx)("button",{onClick:e.logout,children:"Logout"})]}):Object(W.jsx)(J.b,{to:"/login",children:"Login"})})]})},Z=n(16),q=n.n(Z),Q=function(){return Object(W.jsxs)("nav",{className:q.a.nav,children:[Object(W.jsx)("div",{className:q.a.item,children:Object(W.jsx)(J.b,{to:"/profile",activeClassName:q.a.activeLink,children:"Profile"})}),Object(W.jsx)("div",{className:q.a.item,children:Object(W.jsx)(J.b,{to:"/dialogs",activeClassName:q.a.activeLink,children:"Messages"})}),Object(W.jsx)("div",{className:q.a.item,children:Object(W.jsx)(J.b,{to:"/users",activeClassName:q.a.activeLink,children:"Users"})}),Object(W.jsx)("div",{className:q.a.item,children:Object(W.jsx)(J.b,{to:"/news",activeClassName:q.a.activeLink,children:"News"})}),Object(W.jsx)("div",{className:q.a.item,children:Object(W.jsx)(J.b,{to:"/music",activeClassName:q.a.activeLink,children:"Music"})}),Object(W.jsx)("div",{className:q.a.item,children:Object(W.jsx)(J.b,{to:"/friends",activeClassName:q.a.activeLink,children:"Friends"})})]})},V=n(10),X=(n(247),function(){return Object(W.jsx)("div",{children:"News"})}),$=(n(248),function(){return Object(W.jsx)("div",{children:"Music"})}),ee=n(12),te=n(89),ne=n.n(te),re=n.p+"static/media/user.e8348d6f.png",ie=n(125),ce=n(131),se=n.n(ce),oe=function(e){for(var t=Math.ceil(e.totalUsersCount/e.pageSize),n=[],r=1;r<=t;r++)n.push(r);var i=Math.ceil(t/10),c=Object(T.useState)(1),s=Object(ie.a)(c,2),o=s[0],a=s[1],u=10*(o-1)+1,l=10*o;return Object(W.jsxs)("div",{children:[o>1&&Object(W.jsx)("button",{onClick:function(){return a(o-1)},children:"Prev"}),n.filter((function(e){return e>=u&&e<=l})).map((function(t){return Object(W.jsx)("span",{onClick:function(n){return e.onPageChanged(t)},className:e.currentPage===t?"pageNumber "+se.a.selectedPage:"pageNumber",children:t},t)})),i>o&&Object(W.jsx)("button",{onClick:function(){return a(o+1)},children:"Next"})]})},ae=function(e){for(var t=Math.ceil(e.totalUsersCount/e.pageSize),n=[],r=1;r<=t;r++)n.push(r);n.map((function(t){return Object(W.jsx)("span",{onClick:function(n){return e.onPageChanged(t)},className:e.currentPage===t?ne.a.selectedPage:"",children:t},t)}));return Object(W.jsxs)("div",{children:[Object(W.jsx)("div",{children:Object(W.jsx)(oe,{totalUsersCount:e.totalUsersCount,pageSize:e.pageSize,onPageChanged:e.onPageChanged,currentPage:e.currentPage})}),e.users.map((function(t){return Object(W.jsxs)("div",{children:[Object(W.jsxs)("span",{children:[Object(W.jsx)("div",{children:Object(W.jsx)(J.b,{to:"/profile/"+t.id,children:Object(W.jsx)("img",{src:null!==t.photos.small?t.photos.small:re,className:ne.a.userPhoto,alt:""})})}),Object(W.jsx)("div",{children:t.followed?Object(W.jsx)("button",{disabled:e.followingIsProgreess.some((function(e){return e===t.id})),onClick:function(){e.unFollow(t.id)},children:"Unfollow"}):Object(W.jsx)("button",{disabled:e.followingIsProgreess.some((function(e){return e===t.id})),onClick:function(){e.follow(t.id)},children:"Follow"})})]}),Object(W.jsxs)("span",{children:[Object(W.jsxs)("span",{children:[Object(W.jsx)("div",{children:t.name}),Object(W.jsx)("div",{children:t.status})]}),Object(W.jsxs)("span",{children:[Object(W.jsx)("div",{children:"u.location.country"}),Object(W.jsx)("div",{children:"u.location.city"})]})]})]},t.id)}))]})},ue=n(38),le=function(e){return e.usersPage.users},de=function(e){return e.usersPage.pageSize},je=function(e){return e.usersPage.totalUsersCount},be=function(e){return e.usersPage.currentPage},fe=function(e){return e.usersPage.isFetching},ge=function(e){return e.usersPage.followingIsProgreess},he=function(e){Object(D.a)(n,e);var t=Object(G.a)(n);function n(e){var r;return Object(H.a)(this,n),(r=t.call(this,e)).onPageChanged=function(e){r.props.getUsers(e,r.props.pageSize)},r}return Object(R.a)(n,[{key:"componentDidMount",value:function(){this.props.getUsers(this.props.currentPage,this.props.pageSize)}},{key:"render",value:function(){return Object(W.jsxs)(W.Fragment,{children:[this.props.isFetching?Object(W.jsx)(ue.a,{}):null,Object(W.jsx)(ae,{totalUsersCount:this.props.totalUsersCount,pageSize:this.props.pageSize,currentPage:this.props.currentPage,onPageChanged:this.onPageChanged,users:this.props.users,follow:this.props.follow,unfollow:this.props.unfollow,followingIsProgreess:this.props.followingIsProgreess,toggleIsFollowingProgress:this.props.toggleIsFollowingProgress})]})}}]),n}(z.a.Component),pe=Object(r.d)(Object(ee.b)((function(e){return{users:le(e),pageSize:de(e),totalUsersCount:je(e),currentPage:be(e),isFetching:fe(e),followingIsProgreess:ge(e)}}),{followSuccess:_,unFollowSuccess:w,setCurrentPage:S,getUsers:function(e,t){return function(n){n(y(!0)),n(S(e)),s.c.getUsers(e,t).then((function(e){var t,r;n(y(!1)),n((t=e.items,{type:O,users:t})),n((r=e.totalCount,{type:v,totalCount:r}))}))}},follow:function(e){return function(t){t(N(!0,e)),s.c.follow(e).then((function(n){0===n.resultCode&&t(_(e)),t(N(!1,e))}))}},unFollow:function(e){return function(t){t(N(!0,e)),s.c.unfollow(e).then((function(n){0===n.resultCode&&t(w(e)),t(N(!1,e))}))}}}))(he),Oe=function(e){Object(D.a)(n,e);var t=Object(G.a)(n);function n(){return Object(H.a)(this,n),t.apply(this,arguments)}return Object(R.a)(n,[{key:"render",value:function(){return Object(W.jsx)(W.Fragment,{children:Object(W.jsx)(K,Object(i.a)({},this.props))})}}]),n}(z.a.Component),me=Object(ee.b)((function(e){return{isAuth:e.auth.isAuth,login:e.auth.login}}),{logout:function(){return function(e){s.a.logout().then((function(t){0===t.resultCode&&e(u(null,null,null,!1))}))}}})(Oe),ve=n(124),xe=n(123),Pe=n(82),Ce=n(62),_e=n(51),we=n.n(_e),Se=Object(ve.a)({form:"login"})((function(e){return Object(W.jsxs)("form",{action:"",onSubmit:e.handleSubmit,children:[Object(W.jsx)("div",{children:Object(W.jsx)(xe.a,{placeholder:"login",name:"login",component:Ce.a,validate:[Pe.b]})}),Object(W.jsx)("div",{children:Object(W.jsx)(xe.a,{placeholder:"password",name:"password",type:"password",component:Ce.a,validate:[Pe.b]})}),Object(W.jsxs)("div",{children:[Object(W.jsx)(xe.a,{type:"checkbox",name:"rememberMe",component:Ce.a})," remember me"]}),e.error&&Object(W.jsx)("div",{className:we.a.formSummaryError,children:e.error}),Object(W.jsx)("div",{children:Object(W.jsx)("button",{type:"submit",children:"Login"})})]})})),ye=function(){var e=Object(ee.c)();return Object(ee.d)((function(e){return e.auth.isAuth}))?Object(W.jsx)(V.a,{to:"/profile"}):Object(W.jsxs)("div",{children:[Object(W.jsx)("h1",{children:"Login"}),Object(W.jsx)(Se,{onSubmit:function(t){console.log(t);var n=t.login,r=t.password,i=t.rememberMe;e(function(e,t,n){return function(r){s.a.login(e,t,n).then((function(e){if(0===e.resultCode)r(l());else{var t=e.messages.length>0?e.messages[0]:"Some error",n=Object(c.a)("login",{_error:t});r(n)}console.log(e)}))}}(n,r,i))}})]})},Ne=function(e){return function(t){return Object(W.jsx)(T.Suspense,{fallback:Object(W.jsx)(ue.a,{}),children:Object(W.jsx)(e,Object(i.a)({},t))})}},ke=z.a.lazy((function(){return n.e(4).then(n.bind(null,295))})),Ie=z.a.lazy((function(){return n.e(3).then(n.bind(null,294))})),Fe=function(e){Object(D.a)(n,e);var t=Object(G.a)(n);function n(){return Object(H.a)(this,n),t.apply(this,arguments)}return Object(R.a)(n,[{key:"componentDidMount",value:function(){this.props.initializeApp()}},{key:"render",value:function(){return this.props.initialized?Object(W.jsxs)("div",{className:"app__wrapper",children:[Object(W.jsx)(me,{}),Object(W.jsx)(Q,{}),Object(W.jsxs)("div",{className:"app-wrapper-content",children:[Object(W.jsx)(V.b,{path:"/dialogs",render:Ne(ke)}),Object(W.jsx)(V.b,{path:"/profile/:userId?",render:Ne(Ie)}),Object(W.jsx)(V.b,{path:"/users",render:function(){return Object(W.jsx)(pe,{})}}),Object(W.jsx)(V.b,{path:"/news",component:X}),Object(W.jsx)(V.b,{path:"/music",component:$}),Object(W.jsx)(V.b,{path:"/login",render:function(){return Object(W.jsx)(ye,{})}})]})]}):Object(W.jsx)(ue.a,{})}}]),n}(z.a.Component),Ue=Object(r.d)(V.f,Object(ee.b)((function(e){return{initialized:e.app.initialized}}),{authThunc:l,initializeApp:function(){return function(e){e(l()).then((function(){e({type:F})}))}}}))(Fe),Ee=function(e){e&&e instanceof Function&&n.e(5).then(n.bind(null,293)).then((function(t){var n=t.getCLS,r=t.getFID,i=t.getFCP,c=t.getLCP,s=t.getTTFB;n(e),r(e),i(e),c(e),s(e)}))};M.a.render(Object(W.jsx)(z.a.StrictMode,{children:Object(W.jsx)(J.a,{children:Object(W.jsx)(ee.a,{store:L,children:Object(W.jsx)(Ue,{})})})}),document.getElementById("root")),window.store=L,Ee()},38:function(e,t,n){"use strict";var r=n.p+"static/media/loader.91319f38.gif",i=n(1);t.a=function(){return Object(i.jsx)("div",{style:{backgroundColor:"white"},children:Object(i.jsx)("img",{src:r})})}},51:function(e,t,n){e.exports={formControl:"FormControls_formControl__7H_Si",error:"FormControls_error__1lBMS",formSummaryError:"FormControls_formSummaryError__2SJRr"}},62:function(e,t,n){"use strict";n.d(t,"b",(function(){return u})),n.d(t,"a",(function(){return l}));var r=n(5),i=n(132),c=n(51),s=n.n(c),o=n(1),a=function(e){e.input;var t=e.meta,n=(e.child,Object(i.a)(e,["input","meta","child"])),r=t.error&&t.touched;return Object(o.jsxs)("div",{className:s.a.formControl+" "+(r?s.a.error:""),children:[Object(o.jsx)("div",{children:n.children}),r&&Object(o.jsx)("span",{children:t.error})]})},u=function(e){return Object(o.jsx)(a,Object(r.a)(Object(r.a)({},e),{},{children:Object(o.jsx)("textarea",Object(r.a)(Object(r.a)({},e.input),e))}))},l=function(e){return Object(o.jsx)(a,Object(r.a)(Object(r.a)({},e),{},{children:Object(o.jsx)("input",Object(r.a)(Object(r.a)({},e.input),e))}))}},82:function(e,t,n){"use strict";n.d(t,"b",(function(){return r})),n.d(t,"a",(function(){return i}));var r=function(e){if(!e)return"Field is reuquired"},i=function(e){return function(t){if(t&&t.length>e)return"Max length is ".concat(e)}}},86:function(e,t,n){e.exports={header:"Header_header__QoHEZ",loginBlock:"Header_loginBlock__1a20-"}},89:function(e,t,n){e.exports={userPhoto:"users_userPhoto__3bKWu",selectedPage:"users_selectedPage__1e9MY"}},92:function(e,t,n){"use strict";n.d(t,"d",(function(){return l})),n.d(t,"a",(function(){return d})),n.d(t,"c",(function(){return b})),n.d(t,"b",(function(){return f})),n.d(t,"e",(function(){return g}));var r=n(31),i=n(5),c=n(14),s="ADD-POST",o="SET_USER_PROFILE",a="SET_STATUS",u={posts:[{id:1,message:"Hi",likesCount:12},{id:2,message:"Hello",likesCount:11}],profile:null,status:""},l=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:u,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case s:var n={id:5,message:t.text,likesCount:0};return Object(i.a)(Object(i.a)({},e),{},{newPostText:"",posts:[].concat(Object(r.a)(e.posts),[n])});case o:return Object(i.a)(Object(i.a)({},e),{},{profile:t.profile});case a:return Object(i.a)(Object(i.a)({},e),{},{status:t.status});default:return e}},d=function(e){return{type:s,text:e}},j=function(e){return{type:a,status:e}},b=function(e){return function(t){c.b.getUserProfile(e).then((function(e){var n;t((n=e.data,{type:o,profile:n}))}))}},f=function(e){return function(t){c.b.getStatus(e).then((function(e){t(j(e.data))}))}},g=function(e){return function(t){c.b.updateStatus(e).then((function(n){0===n.data.resultCode&&t(j(e))}))}}}},[[287,1,2]]]);
//# sourceMappingURL=main.b491908b.chunk.js.map